<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luy·ªán Tr√≠ Nh·ªõ Logic - Active Recall</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Custom styles for 3D flip effect */
        .perspective-1000 {
            perspective: 1000px;
        }
        .transform-style-3d {
            transform-style: preserve-3d;
        }
        .backface-hidden {
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
        }
        /* Class h·ªó tr·ª£ xoay cho m·∫∑t sau */
        .rotate-y-180-static {
            transform: rotateY(180deg);
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-indigo-50 to-blue-100 min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (Recreated as Components for standalone usage) ---
        
        const Brain = ({size=24, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z"/><path d="M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z"/></svg>
        );
        const Zap = ({size=24, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        );
        const CheckCircle = ({size=24, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
        );
        const AlertCircle = ({size=24, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>
        );
        const ThumbsUp = ({size=24, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M7 10v12"/><path d="M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2h0a3.13 3.13 0 0 1 3 3.88Z"/></svg>
        );
        const Star = ({size=24, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
        );
        const RotateCcw = ({size=24, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
        );
        const RefreshCw = ({size=24, className=""}) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>
        );

        // --- SVG Components cho c√°c c·ªïng Logic (Artistic Style) ---

        const AndGateSVG = () => (
          <svg viewBox="0 0 100 60" className="w-32 h-20 stroke-current text-blue-500 fill-none stroke-2">
            <line x1="10" y1="15" x2="30" y2="15" />
            <text x="0" y="20" className="text-[10px] fill-gray-500 stroke-none">A</text>
            <line x1="10" y1="45" x2="30" y2="45" />
            <text x="0" y="50" className="text-[10px] fill-gray-500 stroke-none">B</text>
            <path d="M30 5 L55 5 C70 5 70 55 55 55 L30 55 Z" className="fill-blue-50/20" />
            <line x1="70" y1="30" x2="90" y2="30" />
            <text x="92" y="35" className="text-[10px] fill-gray-500 stroke-none">Y</text>
          </svg>
        );

        const OrGateSVG = () => (
          <svg viewBox="0 0 100 60" className="w-32 h-20 stroke-current text-green-500 fill-none stroke-2">
            <line x1="10" y1="15" x2="35" y2="15" />
            <text x="0" y="20" className="text-[10px] fill-gray-500 stroke-none">A</text>
            <line x1="10" y1="45" x2="35" y2="45" />
            <text x="0" y="50" className="text-[10px] fill-gray-500 stroke-none">B</text>
            <path d="M30 5 C40 5 55 15 75 30 C55 45 40 55 30 55 C40 35 40 25 30 5 Z" className="fill-green-50/20" />
            <line x1="75" y1="30" x2="90" y2="30" />
            <text x="92" y="35" className="text-[10px] fill-gray-500 stroke-none">Y</text>
          </svg>
        );

        const NotGateSVG = () => (
          <svg viewBox="0 0 100 60" className="w-32 h-20 stroke-current text-red-500 fill-none stroke-2">
            <line x1="10" y1="30" x2="30" y2="30" />
            <text x="0" y="35" className="text-[10px] fill-gray-500 stroke-none">A</text>
            <path d="M30 10 L60 30 L30 50 Z" className="fill-red-50/20" />
            <circle cx="65" cy="30" r="5" />
            <line x1="70" y1="30" x2="90" y2="30" />
            <text x="92" y="35" className="text-[10px] fill-gray-500 stroke-none">Y</text>
          </svg>
        );

        const NandGateSVG = () => (
          <svg viewBox="0 0 100 60" className="w-32 h-20 stroke-current text-purple-500 fill-none stroke-2">
            <line x1="10" y1="15" x2="30" y2="15" />
            <text x="0" y="20" className="text-[10px] fill-gray-500 stroke-none">A</text>
            <line x1="10" y1="45" x2="30" y2="45" />
            <text x="0" y="50" className="text-[10px] fill-gray-500 stroke-none">B</text>
            <path d="M30 5 L55 5 C70 5 70 55 55 55 L30 55 Z" className="fill-purple-50/20" />
            <circle cx="75" cy="30" r="5" />
            <line x1="80" y1="30" x2="95" y2="30" />
            <text x="95" y="35" className="text-[10px] fill-gray-500 stroke-none">Y</text>
          </svg>
        );

        const NorGateSVG = () => (
          <svg viewBox="0 0 100 60" className="w-32 h-20 stroke-current text-orange-500 fill-none stroke-2">
            <line x1="10" y1="15" x2="35" y2="15" />
            <text x="0" y="20" className="text-[10px] fill-gray-500 stroke-none">A</text>
            <line x1="10" y1="45" x2="35" y2="45" />
            <text x="0" y="50" className="text-[10px] fill-gray-500 stroke-none">B</text>
            <path d="M30 5 C40 5 55 15 75 30 C55 45 40 55 30 55 C40 35 40 25 30 5 Z" className="fill-orange-50/20" />
            <circle cx="80" cy="30" r="5" />
            <line x1="85" y1="30" x2="95" y2="30" />
            <text x="95" y="35" className="text-[10px] fill-gray-500 stroke-none">Y</text>
          </svg>
        );

        // --- Data ---

        const flashcards = [
          {
            id: 1,
            category: "C∆° b·∫£n",
            question: "Ph√©p c·ªông h·ªá nh·ªã ph√¢n: 1 + 1 = ?",
            answer: "10 (ƒê·ªçc l√†: M·ªôt kh√¥ng)",
            explanation: "Trong h·ªá 2, kh√¥ng c√≥ s·ªë 2. Khi ƒë·ªß 2 ƒë∆°n v·ªã, ta vi·∫øt 0 v√† nh·ªõ 1 sang h√†ng b√™n tr√°i.",
            visual: <div className="text-4xl font-mono font-bold text-blue-600">1 + 1 = 10</div>
          },
          {
            id: 2,
            category: "C·ªïng Logic",
            question: "C·ªïng AND (V√†): Khi n√†o k·∫øt qu·∫£ b·∫±ng 1?",
            answer: "Ch·ªâ khi T·∫§T C·∫¢ ƒë·∫ßu v√†o ƒë·ªÅu l√† 1.",
            explanation: "N·∫øu c√≥ b·∫•t k·ª≥ s·ªë 0 n√†o tham gia, k·∫øt qu·∫£ s·∫Ω l√† 0 ngay l·∫≠p t·ª©c. C·ªïng n√†y r·∫•t 'kh√≥ t√≠nh'.",
            visual: <AndGateSVG />
          },
          {
            id: 3,
            category: "C·ªïng Logic",
            question: "C·ªïng OR (Ho·∫∑c): Khi n√†o k·∫øt qu·∫£ b·∫±ng 1?",
            answer: "Khi C√ì √çT NH·∫§T m·ªôt ƒë·∫ßu v√†o l√† 1.",
            explanation: "N√≥ ch·ªâ b·∫±ng 0 khi t·∫•t c·∫£ ƒë·ªÅu l√† 0. C·ªïng n√†y r·∫•t 'd·ªÖ t√≠nh'.",
            visual: <OrGateSVG />
          },
          {
            id: 4,
            category: "C·ªïng Logic",
            question: "C·ªïng NOT (ƒê·∫£o): N√≥ l√†m g√¨?",
            answer: "ƒê·∫£o ng∆∞·ª£c t√≠n hi·ªáu.",
            explanation: "V√†o 1 ra 0. V√†o 0 ra 1.",
            visual: <NotGateSVG />
          },
          {
            id: 5,
            category: "C·ªïng Logic N√¢ng Cao",
            question: "C·ªïng NAND (NOT + AND): Khi n√†o k·∫øt qu·∫£ b·∫±ng 0?",
            answer: "Ch·ªâ khi T·∫§T C·∫¢ ƒë·∫ßu v√†o ƒë·ªÅu l√† 1.",
            explanation: "N√≥ ng∆∞·ª£c l·∫°i v·ªõi AND. AND ra 1 th√¨ NAND ra 0. (Nh√¨n k·ªπ k√Ω hi·ªáu c√≥ v√≤ng tr√≤n nh·ªè ·ªü ƒë·∫ßu ra).",
            visual: <NandGateSVG />
          },
          {
            id: 6,
            category: "C·ªïng Logic N√¢ng Cao",
            question: "C·ªïng NOR (NOT + OR): Khi n√†o k·∫øt qu·∫£ b·∫±ng 1?",
            answer: "Ch·ªâ khi T·∫§T C·∫¢ ƒë·∫ßu v√†o ƒë·ªÅu l√† 0.",
            explanation: "N√≥ ng∆∞·ª£c l·∫°i v·ªõi OR. OR c·∫ßn √≠t nh·∫•t m·ªôt s·ªë 1, th√¨ NOR c·∫•m ti·ªát m·ªçi s·ªë 1.",
            visual: <NorGateSVG />
          },
          {
            id: 7,
            category: "Th·ª≠ th√°ch",
            question: "ƒê·∫ßu v√†o: A=1, B=0 ƒëi qua c·ªïng AND. K·∫øt qu·∫£?",
            answer: "0",
            explanation: "V√¨ AND c·∫ßn c·∫£ hai l√† 1. ·ªû ƒë√¢y B=0 n√™n b·ªã lo·∫°i.",
            visual: <div className="flex flex-col items-center gap-2"><AndGateSVG /><span className="font-mono text-sm">1 AND 0 = 0</span></div>
          },
          {
            id: 8,
            category: "Th·ª≠ th√°ch",
            question: "ƒê·∫ßu v√†o: A=0, B=0 ƒëi qua c·ªïng NOR. K·∫øt qu·∫£?",
            answer: "1",
            explanation: "NOR l√† 'Ph·ªß ƒë·ªãnh c·ªßa Ho·∫∑c'. 0 OR 0 = 0, ƒë·∫£o ng∆∞·ª£c l·∫°i th√†nh 1.",
            visual: <div className="flex flex-col items-center gap-2"><NorGateSVG /><span className="font-mono text-sm">NOT(0 OR 0) = 1</span></div>
          }
        ];

        function AnkiStudyApp() {
          // Active Recall State
          const [deck, setDeck] = useState([...flashcards]);
          const [isFlipped, setIsFlipped] = useState(false);
          const [completedCount, setCompletedCount] = useState(0);
          const [totalInitial] = useState(flashcards.length);

          const currentCard = deck.length > 0 ? deck[0] : null;

          const handleFlip = () => {
            setIsFlipped(!isFlipped);
          };

          const handleRate = (difficulty, e) => {
            if (e) e.stopPropagation();
            setIsFlipped(false);

            setTimeout(() => {
              const remainingCards = deck.slice(1);
              const current = deck[0];

              if (difficulty === 'again') {
                const insertIndex = Math.min(remainingCards.length, 2);
                const newDeck = [...remainingCards];
                newDeck.splice(insertIndex, 0, current);
                setDeck(newDeck);
              } else if (difficulty === 'hard') {
                setDeck([...remainingCards, current]);
              } else {
                setDeck(remainingCards);
                setCompletedCount(prev => prev + 1);
              }
            }, 300);
          };

          const handleReset = () => {
             setDeck([...flashcards].sort(() => Math.random() - 0.5));
             setCompletedCount(0);
             setIsFlipped(false);
          };

          useEffect(() => {
            const handleKeyDown = (e) => {
              if (!currentCard) return;
              
              if (e.key === " " || e.key === "Enter") {
                 handleFlip();
              }
              
              if (isFlipped) {
                if (e.key === "1") handleRate('again', e);
                if (e.key === "2") handleRate('hard', e);
                if (e.key === "3") handleRate('good', e);
                if (e.key === "4") handleRate('easy', e);
              }
            };
            window.addEventListener("keydown", handleKeyDown);
            return () => window.removeEventListener("keydown", handleKeyDown);
          }, [isFlipped, deck, currentCard]);

          if (!currentCard) {
            return (
              <div className="min-h-screen bg-gradient-to-br from-indigo-50 to-blue-100 flex flex-col items-center justify-center p-4 font-sans">
                <div className="bg-white p-8 rounded-2xl shadow-xl text-center max-w-md w-full border-2 border-green-100">
                  <div className="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600">
                    <CheckCircle size={40} />
                  </div>
                  <h2 className="text-3xl font-bold text-gray-800 mb-2">Ho√†n th√†nh xu·∫•t s·∫Øc! üéâ</h2>
                  <p className="text-gray-600 mb-8">
                    C·∫≠u ƒë√£ √¥n t·∫≠p xong {totalInitial} th·∫ª b√†i. 
                    <br/>"B·∫£n ng√£ gi·ªèi giang" r·∫•t t·ª± h√†o v·ªÅ s·ª± n·ªó l·ª±c n√†y!
                  </p>
                  <button 
                    onClick={handleReset}
                    className="w-full py-4 bg-indigo-600 hover:bg-indigo-700 text-white rounded-xl font-bold flex items-center justify-center gap-2 transition-all shadow-lg active:scale-95"
                  >
                    <RotateCcw size={20} />
                    H·ªçc l·∫°i l·∫ßn n·ªØa
                  </button>
                </div>
              </div>
            );
          }

          return (
            <div className="min-h-screen bg-gradient-to-br from-indigo-50 to-blue-100 flex flex-col items-center justify-center p-4 font-sans text-gray-800">
              
              <div className="mb-6 text-center">
                <h1 className="text-2xl font-bold text-indigo-700 flex items-center justify-center gap-2 mb-1">
                  <Brain size={24} className="text-indigo-700" />
                  Active Recall: Logic Gates
                </h1>
                <div className="text-sm font-medium text-gray-500 bg-white/50 px-4 py-1 rounded-full inline-block">
                  ƒê√£ thu·ªôc: <span className="text-green-600 font-bold">{completedCount}</span> / C√≤n l·∫°i: <span className="text-indigo-600 font-bold">{deck.length}</span>
                </div>
              </div>

              {/* CARD CONTAINER */}
              <div className="relative w-full max-w-md h-[500px] perspective-1000 group cursor-pointer" onClick={handleFlip}>
                <div 
                  className="relative w-full h-full transition-all duration-500 transform-style-3d shadow-xl rounded-2xl"
                  style={{ transform: isFlipped ? 'rotateY(180deg)' : 'rotateY(0deg)' }}
                >
                  
                  {/* --- FRONT FACE --- */}
                  <div className="absolute w-full h-full bg-white rounded-2xl p-8 flex flex-col items-center justify-center backface-hidden border-2 border-indigo-100">
                    <span className="absolute top-4 left-4 bg-indigo-100 text-indigo-700 text-xs font-bold px-3 py-1 rounded-full uppercase tracking-wide">
                      {currentCard.category}
                    </span>
                    
                    <div className="flex-1 flex flex-col items-center justify-center text-center w-full">
                      <h2 className="text-2xl font-bold text-gray-800 leading-relaxed mb-6">
                        {currentCard.question}
                      </h2>
                      
                      <div className="w-full bg-yellow-50 border border-yellow-200 p-4 rounded-lg text-sm text-yellow-800 flex flex-col items-center gap-2">
                        <Brain size={18} className="text-yellow-600"/>
                        <span className="font-semibold">Nhi·ªám v·ª• Active Recall:</span>
                        <span>ƒê·ª´ng l·∫≠t v·ªôi! H√£y n√≥i to c√¢u tr·∫£ l·ªùi ho·∫∑c v·∫Ω ra gi·∫•y tr∆∞·ªõc.</span>
                      </div>
                    </div>
                    
                    <p className="text-gray-400 text-sm mt-8 flex items-center gap-1 animate-pulse">
                      <Zap size={14} /> Ch·∫°m ƒë·ªÉ ki·ªÉm tra ƒë√°p √°n
                    </p>
                  </div>

                  {/* --- BACK FACE --- */}
                  <div 
                    className="absolute w-full h-full bg-white rounded-2xl p-6 flex flex-col items-center justify-between backface-hidden border-2 border-indigo-200 rotate-y-180-static"
                  >
                    <div className="flex-1 flex flex-col items-center justify-center w-full gap-4">
                       <div className="bg-indigo-50 p-4 rounded-xl w-full flex justify-center border border-indigo-100 min-h-[120px] items-center">
                        {currentCard.visual}
                      </div>

                      <div className="text-center w-full">
                        <h3 className="text-2xl font-bold text-indigo-900 mb-2">{currentCard.answer}</h3>
                        <p className="text-gray-600 text-sm leading-relaxed bg-gray-50 p-3 rounded-lg border border-gray-100">
                          {currentCard.explanation}
                        </p>
                      </div>
                    </div>

                    <div className="w-full pt-4 border-t border-gray-100">
                      <p className="text-xs text-center text-gray-400 mb-2 font-medium uppercase tracking-wider">C·∫≠u nh·ªõ b√†i n√†y th·∫ø n√†o?</p>
                      <div className="grid grid-cols-4 gap-2">
                        <button 
                          onClick={(e) => handleRate('again', e)}
                          className="flex flex-col items-center justify-center p-2 rounded-lg bg-red-50 hover:bg-red-100 text-red-600 transition-colors border border-red-100"
                        >
                          <AlertCircle size={20} className="mb-1" />
                          <span className="text-xs font-bold">Qu√™n</span>
                          <span className="text-[10px] opacity-70">1 ph√∫t</span>
                        </button>

                        <button 
                          onClick={(e) => handleRate('hard', e)}
                          className="flex flex-col items-center justify-center p-2 rounded-lg bg-yellow-50 hover:bg-yellow-100 text-yellow-600 transition-colors border border-yellow-100"
                        >
                          <RefreshCw size={20} className="mb-1" />
                          <span className="text-xs font-bold">Kh√≥</span>
                          <span className="text-[10px] opacity-70">Cu·ªëi b√†i</span>
                        </button>

                        <button 
                          onClick={(e) => handleRate('good', e)}
                          className="flex flex-col items-center justify-center p-2 rounded-lg bg-blue-50 hover:bg-blue-100 text-blue-600 transition-colors border border-blue-100"
                        >
                          <ThumbsUp size={20} className="mb-1" />
                          <span className="text-xs font-bold">ƒê∆∞·ª£c</span>
                          <span className="text-[10px] opacity-70">Xong</span>
                        </button>

                        <button 
                          onClick={(e) => handleRate('easy', e)}
                          className="flex flex-col items-center justify-center p-2 rounded-lg bg-green-50 hover:bg-green-100 text-green-600 transition-colors border border-green-100"
                        >
                          <Star size={20} className="mb-1" />
                          <span className="text-xs font-bold">D·ªÖ</span>
                          <span className="text-[10px] opacity-70">Xong</span>
                        </button>
                      </div>
                    </div>

                  </div>
                </div>
              </div>

              <div className="mt-8 text-center max-w-sm">
                 <p className="text-xs text-gray-400">
                   Ph√≠m t·∫Øt: Space (L·∫≠t) ‚Ä¢ 1 (Qu√™n) ‚Ä¢ 2 (Kh√≥) ‚Ä¢ 3 (ƒê∆∞·ª£c) ‚Ä¢ 4 (D·ªÖ)
                 </p>
              </div>

            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AnkiStudyApp />);
    </script>
</body>
</html>
